// Copyright 2013 lovebear https://github.com/lovebear/lazyseq.js
function LazySeq(t){this.data=t,Array.isArray(this.data)&&(this._datatype="array"),this._akeys=Object.keys(this.data),this._akeys=this._akeys.reverse(),this._idx=[],this._len=[],this.alen=this._akeys.length;for(var i=0;this.alen>i;i++)this._idx.push(0),this._len.push(this.data[this._akeys[i]].length);this._init=!0,this._done=!1}LazySeq.prototype.skip=function(t){this.take(t)},LazySeq.prototype.take=function(t){for(var i,s=[],e=0;t>e&&(i=this.next(),i);e++)s.push(i);return s},LazySeq.prototype.reset=function(){for(var t=0,i=this._idx.length;i>t;t++)this._idx[t]=0;this._done=!1,this._init=!0},LazySeq.prototype._adjustIdx=function(){for(var t=this.alen;t>0;t--){if(this._idx[t-1]<this._len[t-1]-1){this._idx[t-1]++;break}this._idx[t-1]=0,1==t&&(this._done=!0)}},LazySeq.prototype.next=function(){if(this._init?this._init=!1:this._adjustIdx(),this._done)return void 0;for(var t=this._datatype?[]:{},i=0;this.alen>i;i++)t[this._akeys[i]]=this.data[this._akeys[i]][this._idx[i]];return t},"undefined"!=typeof module&&module.exports&&(module.exports=LazySeq);